---
description: グラフェムクラスタのセル幅を計算する方法
platform: all
default: unicode
---

# grapheme-width-method

**言語:** [English](../../en/config/grapheme-width-method.en.md) | 日本語

## 説明

グラフェムクラスタのセル幅を計算するために使用する方法。デフォルト値は `unicode` で、Unicode標準を使用してグラフェム幅を決定します。これにより正確なグラフェム幅が得られますが、`wcswidth` などのレガシー方法を使用する可能性がある一部のプログラム（シェルなど）でカーソルのズレの問題が生じる可能性があります。

有効な値は：

- `legacy` - `wcswidth` などのレガシー方法を使用してグラフェム幅を決定します。これはレガシープログラムとの互換性を最大化しますが、スキントーン絵文字や非英語文字などの特定のグラフェムに対して不正確なグラフェム幅が生じる可能性があります。

  これを「レガシー」と呼ぶのは、動作が未定義であり、将来的に動作を変更する能力を保持したいためです。たとえば、現在または将来的に libc の `wcswidth` を使用する場合もあれば、使用しない場合もあります。

- `unicode` - Unicode標準を使用してグラフェム幅を決定します。

実行中のプログラムが明示的にターミナルモード2027を有効にすると、この設定に関係なく `unicode` 幅が強制されます。モード2027がリセットされると、この設定が再び使用されます。

この設定は実行時に変更できますが、既存のターミナルには影響しません。新しいターミナルのみが新しい設定を使用します。

## デフォルト

```conf
# https://ghostty.org/docs/config/reference#grapheme-width-method
# グラフェムクラスタのセル幅を計算する方法 (default: unicode)
grapheme-width-method = unicode
```
